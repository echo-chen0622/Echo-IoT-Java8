<section *ngIf="!versionLoadResult$" fxLayout="column" style="height: 100%;">
  <mat-toolbar>
    <h2>{{ 'version-control.restore-entities-from-version' | translate: {versionName} }}</h2>
    <span fxFlex></span>
  </mat-toolbar>
  <mat-progress-bar color="warn" style="z-index: 10; width: 100%; margin-bottom: -4px;" mode="indeterminate"
                    *ngIf="isLoading$ | async">
  </mat-progress-bar>
  <form [formGroup]="loadVersionFormGroup" fxLayout="column" style="flex: 1; padding-top: 16px; overflow: auto;">
    <tb-entity-types-version-load
      formControlName="entityTypes">
    </tb-entity-types-version-load>
  </form>
  <div fxLayoutAlign="end center" fxLayoutGap="8px" style="padding-top: 16px;">
    <button mat-button color="primary"
            type="button"
            [disabled]="(isLoading$ | async)"
            (click)="cancel()" cdkFocusInitial>
      {{ 'action.cancel' | translate }}
    </button>
    <button mat-raised-button color="primary"
            type="button"
            (click)="restore()"
            [disabled]="(isLoading$ | async) || loadVersionFormGroup.invalid">
      {{ 'action.restore' | translate }}
    </button>
  </div>
</section>
<section *ngIf="versionLoadResult$">
  <div *ngIf="(versionLoadResult$ | async)?.done && !entityTypeLoadResults?.length && !errorMessage" class="mat-title vc-result-message">
    {{ 'version-control.no-entities-restored' | translate }}
  </div>
  <div *ngIf="errorMessage" class="mat-title vc-result-message error" [innerHTML]="errorMessage"></div>
  <div *ngFor="let entityTypeLoadResult of entityTypeLoadResults" class="mat-title vc-result-message">{{ entityTypeLoadResultMessage(entityTypeLoadResult) }}</div>
  <div *ngIf="(versionLoadResult$ | async)?.done || hasError; else progress"  fxLayoutAlign="end center" fxLayoutGap="8px">
    <button mat-button color="primary"
            type="button"
            [disabled]="(isLoading$ | async)"
            (click)="cancel()" cdkFocusInitial>
      {{ 'action.close' | translate }}
    </button>
  </div>
  <ng-template #progress>
    <section fxLayout="column" fxLayoutAlign="center center">
      <div class="mat-title vc-result-message progress">
        <span translate>version-control.restoring-entities-from-version</span>
        <mat-progress-bar mode="indeterminate"></mat-progress-bar>
      </div>
    </section>
  </ng-template>
</section>
