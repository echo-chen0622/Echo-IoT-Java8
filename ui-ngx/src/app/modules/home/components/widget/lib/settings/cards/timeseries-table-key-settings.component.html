<section class="tb-widget-settings" [formGroup]="timeseriesTableKeySettingsForm" fxLayout="column">
  <fieldset class="fields-group fields-group-slider">
    <legend class="group-title" translate>widgets.table.cell-style</legend>
    <mat-expansion-panel class="tb-settings" [expanded]="timeseriesTableKeySettingsForm.get('useCellStyleFunction').value">
      <mat-expansion-panel-header fxLayout="row wrap">
        <mat-panel-title>
          <mat-slide-toggle formControlName="useCellStyleFunction" (click)="$event.stopPropagation()"
                            fxLayoutAlign="center">
            {{ 'widgets.table.use-cell-style-function' | translate }}
          </mat-slide-toggle>
        </mat-panel-title>
        <mat-panel-description fxLayoutAlign="end center" fxHide.xs translate>
          widget-config.advanced-settings
        </mat-panel-description>
      </mat-expansion-panel-header>
      <ng-template matExpansionPanelContent>
        <tb-js-func required
                    formControlName="cellStyleFunction"
                    [globalVariables]="functionScopeVariables"
                    [functionArgs]="['value', 'rowData', 'ctx']"
                    functionTitle="{{ 'widgets.table.cell-style-function' | translate }}"
                    helpId="widget/lib/timeseries/cell_style_fn">
        </tb-js-func>
      </ng-template>
    </mat-expansion-panel>
  </fieldset>
  <fieldset class="fields-group fields-group-slider">
    <legend class="group-title" translate>widgets.table.cell-content</legend>
    <mat-expansion-panel class="tb-settings" [expanded]="timeseriesTableKeySettingsForm.get('useCellContentFunction').value">
      <mat-expansion-panel-header fxLayout="row wrap">
        <mat-panel-title>
          <mat-slide-toggle formControlName="useCellContentFunction" (click)="$event.stopPropagation()"
                            fxLayoutAlign="center">
            {{ 'widgets.table.use-cell-content-function' | translate }}
          </mat-slide-toggle>
        </mat-panel-title>
        <mat-panel-description fxLayoutAlign="end center" fxHide.xs translate>
          widget-config.advanced-settings
        </mat-panel-description>
      </mat-expansion-panel-header>
      <ng-template matExpansionPanelContent>
        <tb-js-func required
                    formControlName="cellContentFunction"
                    [globalVariables]="functionScopeVariables"
                    [functionArgs]="['value', 'rowData', 'ctx']"
                    functionTitle="{{ 'widgets.table.cell-content-function' | translate }}"
                    helpId="widget/lib/timeseries/cell_content_fn">
        </tb-js-func>
      </ng-template>
    </mat-expansion-panel>
  </fieldset>
</section>
