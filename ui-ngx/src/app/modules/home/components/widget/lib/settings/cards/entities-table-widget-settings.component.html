<section class="tb-widget-settings" [formGroup]="entitiesTableWidgetSettingsForm" fxLayout="column">
  <fieldset class="fields-group">
    <legend class="group-title" translate>widgets.table.common-table-settings</legend>
    <mat-form-field fxFlex class="mat-block">
      <mat-label translate>widgets.table.entities-table-title</mat-label>
      <input matInput formControlName="entitiesTitle">
    </mat-form-field>
    <section fxLayout="column" fxLayout.gt-xs="row" fxLayoutGap.gt-xs="8px">
      <section fxLayout="column" fxFlex>
        <mat-checkbox formControlName="enableSearch" style="margin-bottom: 16px;">
          {{ 'widgets.table.enable-search' | translate }}
        </mat-checkbox>
        <mat-checkbox formControlName="enableSelectColumnDisplay" style="margin-bottom: 16px;">
          {{ 'widgets.table.enable-select-column-display' | translate }}
        </mat-checkbox>
      </section>
      <section fxLayout="column" fxFlex>
        <mat-checkbox formControlName="enableStickyHeader" style="margin-bottom: 16px;">
          {{ 'widgets.table.enable-sticky-header' | translate }}
        </mat-checkbox>
        <mat-checkbox formControlName="enableStickyAction" style="margin-bottom: 16px;">
          {{ 'widgets.table.enable-sticky-action' | translate }}
        </mat-checkbox>
      </section>
    </section>
    <mat-form-field fxFlex class="mat-block">
      <mat-label translate>widgets.table.hidden-cell-button-display-mode</mat-label>
      <mat-select formControlName="reserveSpaceForHiddenAction">
        <mat-option [value]="'true'">
          {{ 'widgets.table.show-empty-space-hidden-action' | translate }}
        </mat-option>
        <mat-option [value]="'false'">
          {{ 'widgets.table.dont-reserve-space-hidden-action' | translate }}
        </mat-option>
      </mat-select>
    </mat-form-field>
    <section fxLayout="column" fxLayoutGap="8px">
      <section fxLayout="column" fxLayout.gt-xs="row" fxLayoutGap="8px" fxLayoutAlign.gt-xs="start center">
        <mat-slide-toggle fxFlex formControlName="displayEntityName">
          {{ 'widgets.table.display-entity-name' | translate }}
        </mat-slide-toggle>
        <mat-form-field fxFlex class="mat-block">
          <mat-label translate>widgets.table.entity-name-column-title</mat-label>
          <input matInput formControlName="entityNameColumnTitle">
        </mat-form-field>
      </section>
      <section fxLayout="column" fxLayout.gt-xs="row" fxLayoutGap="8px" fxLayoutAlign.gt-xs="start center">
        <mat-slide-toggle fxFlex formControlName="displayEntityLabel">
          {{ 'widgets.table.display-entity-label' | translate }}
        </mat-slide-toggle>
        <mat-form-field fxFlex class="mat-block">
          <mat-label translate>widgets.table.entity-label-column-title</mat-label>
          <input matInput formControlName="entityLabelColumnTitle">
        </mat-form-field>
      </section>
      <mat-slide-toggle formControlName="displayEntityType">
        {{ 'widgets.table.display-entity-type' | translate }}
      </mat-slide-toggle>
      <section fxLayout="column" fxLayout.gt-xs="row" fxLayoutGap="8px" fxLayoutAlign.gt-xs="start center">
        <mat-slide-toggle fxFlex formControlName="displayPagination">
          {{ 'widgets.table.display-pagination' | translate }}
        </mat-slide-toggle>
        <mat-form-field fxFlex class="mat-block">
          <mat-label translate>widgets.table.default-page-size</mat-label>
          <input matInput type="number" min="1" step="1" formControlName="defaultPageSize">
        </mat-form-field>
      </section>
      <mat-form-field fxFlex class="mat-block">
        <mat-label translate>widgets.table.default-sort-order</mat-label>
        <input matInput formControlName="defaultSortOrder">
      </mat-form-field>
    </section>
  </fieldset>
  <fieldset class="fields-group fields-group-slider">
    <legend class="group-title" translate>widgets.table.row-style</legend>
    <mat-expansion-panel class="tb-settings" [expanded]="entitiesTableWidgetSettingsForm.get('useRowStyleFunction').value">
      <mat-expansion-panel-header fxLayout="row wrap">
        <mat-panel-title>
          <mat-slide-toggle formControlName="useRowStyleFunction" (click)="$event.stopPropagation()"
                            fxLayoutAlign="center">
            {{ 'widgets.table.use-row-style-function' | translate }}
          </mat-slide-toggle>
        </mat-panel-title>
        <mat-panel-description fxLayoutAlign="end center" fxHide.xs translate>
          widget-config.advanced-settings
        </mat-panel-description>
      </mat-expansion-panel-header>
      <ng-template matExpansionPanelContent>
        <tb-js-func required
                    formControlName="rowStyleFunction"
                    [globalVariables]="functionScopeVariables"
                    [functionArgs]="['entity', 'ctx']"
                    functionTitle="{{ 'widgets.table.row-style-function' | translate }}"
                    helpId="widget/lib/entity/row_style_fn">
        </tb-js-func>
      </ng-template>
    </mat-expansion-panel>
  </fieldset>
</section>
